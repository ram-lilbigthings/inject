<!DOCTYPE html>
<html>
<head>
  <title>My Page</title>
</head>
<body>
  <h1>My Page Content</h1>

  <!-- Add your JavaScript code using <script> tags -->
  <script>
    const siteName = window.location.pathname.substr(1);

    async function getIdValueFromKV(name) {
        const value = await KV.get(name);

        if (value !== null) {
            return value;
        } else {
            throw new Error('ID value not found in KV');
        }
    }

    async function loadScript() {
      try {
        const idValue = await getIdValueFromKV(siteName);

        if (idValue) {
          const scriptCode = '<' + 'script id="' + idValue + '"><' + '/script>';
          const scriptContainer = document.createElement('div');
          scriptContainer.innerHTML = scriptCode;
          document.body.appendChild(scriptContainer);
        } else {
          console.log('ID value not found');
        }
      } catch (error) {
        console.error(error);
      }
    }

    loadScript();
  </script>
</body>
</html>
